<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <title>BacenTools - Ferramentas para Meios de Pagamento</title>
    <!-- Template para meta tags e links de CSS/JS comuns -->
    <div data-template="/components/meta.html"></div>
    <script src="/js/template-loader.js"></script>

    <script>
        // Script para inicializar componentes do Bootstrap após carregamento dos templates
        document.addEventListener('DOMContentLoaded', function () {
            console.log('DOM carregado, inicialização inicial do Bootstrap');
            initBootstrapComponents();
        });

        document.addEventListener('all-templates-loaded', function () {
            console.log('Todos os templates carregados, reinicializando componentes Bootstrap');
            initBootstrapComponents();
        });

        function initBootstrapComponents() {
            // Aguardar um momento para garantir que o Bootstrap esteja carregado
            setTimeout(() => {
                console.log('Inicializando componentes Bootstrap');

                if (typeof bootstrap !== 'undefined') {
                    try {
                        // Reinicializar dropdowns
                        document.querySelectorAll('.dropdown-toggle').forEach(item => {
                            new bootstrap.Dropdown(item);
                        });

                        // Reinicializar tooltips (se houver)
                        document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(item => {
                            new bootstrap.Tooltip(item);
                        });

                        // Adicionar listeners manuais aos botões de navbar toggle
                        document.querySelectorAll('.navbar-toggler').forEach(toggler => {
                            // Remover handlers antigos para evitar duplicação
                            toggler.removeEventListener('click', toggleNavbar);
                            // Adicionar novo handler
                            toggler.addEventListener('click', toggleNavbar);
                        });

                        console.log('Bootstrap inicializado com sucesso');
                    } catch (error) {
                        console.error('Erro ao inicializar Bootstrap:', error);
                    }
                } else {
                    console.warn('Bootstrap JS não está carregado ainda');
                }
            }, 100);
        }

        // Função para lidar com o toggling manual do navbar
        function toggleNavbar(event) {
            const targetSelector = event.currentTarget.getAttribute('data-bs-target');
            if (!targetSelector) return;

            const target = document.querySelector(targetSelector);
            if (!target) return;

            if (typeof bootstrap !== 'undefined' && bootstrap.Collapse) {
                // Usar API do Bootstrap se disponível
                const bsCollapse = new bootstrap.Collapse(target);
                if (target.classList.contains('show')) {
                    bsCollapse.hide();
                } else {
                    bsCollapse.show();
                }
            } else {
                // Fallback manual
                target.classList.toggle('show');
            }
        }
    </script>
    
    <!-- Carregar o Alpine.js somente após os templates -->
    <script>
        document.addEventListener('all-templates-loaded', function() {
            console.log('Carregando Alpine.js após templates');
            const script = document.createElement('script');
            script.src = "https://unpkg.com/alpinejs@3.10.3/dist/cdn.min.js";
            script.defer = true;
            document.head.appendChild(script);
        });
    </script>
</head>

<body>
    <!-- Template para a barra de navegação -->
    <div data-template="/components/navbar.html"></div>

    <main class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8 text-center mb-5">
                <div class="logo-container logo-lg mb-4">
                    <i class="fas fa-university"></i>
                    <i class="fas fa-exchange-alt"></i>
                    <i class="fas fa-code"></i>
                </div>
                <h1 class="display-4">BacenTools</h1>
                <p class="lead">Ferramentas para desenvolvedores e POs que trabalham com meios de pagamento</p>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-md-6 col-lg-3 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-primary text-white">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-university me-2"></i>
                            Consulta de Bancos
                        </h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">Consulte informações sobre instituições financeiras por ISPB, código COMPE ou nome.</p>
                    </div>
                    <div class="card-footer">
                        <a href="/pages/banks.html" class="btn btn-outline-primary">Acessar</a>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-lg-3 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-key me-2"></i>
                            Decoder JWT
                        </h5>
                    </div>
                    <div class="card-body">
                        <p class="card-text">Decodifique e valide tokens JWT utilizados em APIs de pagamento.</p>
                    </div>
                    <div class="card-footer">
                        <a href="/pages/jwt.html" class="btn btn-outline-warning">Acessar</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    <strong>Importante:</strong> Estas ferramentas são para fins de desenvolvimento e testes. Não armazenamos nenhum dado inserido.
                </div>
            </div>
        </div>
    </main>

    <!-- Template para o rodapé -->
    <div data-template="/components/footer.html"></div>
</body>

</html>